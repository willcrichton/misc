<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Ownership Recap - The Rust Programming Language</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="ferris.css">
        <link rel="stylesheet" href="theme/2018-edition.css">
        <link rel="stylesheet" href="js-extensions/packages/consent-form/dist/index.css">
        <link rel="stylesheet" href="js-extensions/packages/feedback/dist/index.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="experiment-intro.html">Experiment Introduction</a></li><li class="chapter-item expanded affix "><a href="title-page.html">The Rust Programming Language</a></li><li class="chapter-item expanded affix "><a href="foreword.html">Foreword</a></li><li class="chapter-item expanded affix "><a href="ch00-00-introduction.html">Introduction</a></li><li class="chapter-item expanded "><a href="ch01-00-getting-started.html"><strong aria-hidden="true">1.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch01-01-installation.html"><strong aria-hidden="true">1.1.</strong> Installation</a></li><li class="chapter-item expanded "><a href="ch01-02-hello-world.html"><strong aria-hidden="true">1.2.</strong> Hello, World!</a></li><li class="chapter-item expanded "><a href="ch01-03-hello-cargo.html"><strong aria-hidden="true">1.3.</strong> Hello, Cargo!</a></li></ol></li><li class="chapter-item expanded "><a href="ch02-00-guessing-game-tutorial.html"><strong aria-hidden="true">2.</strong> Programming a Guessing Game</a></li><li class="chapter-item expanded "><a href="ch03-00-common-programming-concepts.html"><strong aria-hidden="true">3.</strong> Common Programming Concepts</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch03-01-variables-and-mutability.html"><strong aria-hidden="true">3.1.</strong> Variables and Mutability</a></li><li class="chapter-item expanded "><a href="ch03-02-data-types.html"><strong aria-hidden="true">3.2.</strong> Data Types</a></li><li class="chapter-item expanded "><a href="ch03-03-how-functions-work.html"><strong aria-hidden="true">3.3.</strong> Functions</a></li><li class="chapter-item expanded "><a href="ch03-04-comments.html"><strong aria-hidden="true">3.4.</strong> Comments</a></li><li class="chapter-item expanded "><a href="ch03-05-control-flow.html"><strong aria-hidden="true">3.5.</strong> Control Flow</a></li></ol></li><li class="chapter-item expanded "><a href="ch04-00-understanding-ownership.html"><strong aria-hidden="true">4.</strong> Understanding Ownership</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch04-01-what-is-ownership.html"><strong aria-hidden="true">4.1.</strong> What is Ownership?</a></li><li class="chapter-item expanded "><a href="ch04-02-references-and-borrowing.html"><strong aria-hidden="true">4.2.</strong> References and Borrowing</a></li><li class="chapter-item expanded "><a href="ch04-03-fixing-ownership-errors.html"><strong aria-hidden="true">4.3.</strong> Fixing Ownership Errors</a></li><li class="chapter-item expanded "><a href="ch04-04-slices.html"><strong aria-hidden="true">4.4.</strong> The Slice Type</a></li><li class="chapter-item expanded "><a href="ch04-05-ownership-recap.html" class="active"><strong aria-hidden="true">4.5.</strong> Ownership Recap</a></li></ol></li><li class="chapter-item expanded "><a href="ch05-00-structs.html"><strong aria-hidden="true">5.</strong> Using Structs to Structure Related Data</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch05-01-defining-structs.html"><strong aria-hidden="true">5.1.</strong> Defining and Instantiating Structs</a></li><li class="chapter-item expanded "><a href="ch05-02-example-structs.html"><strong aria-hidden="true">5.2.</strong> An Example Program Using Structs</a></li><li class="chapter-item expanded "><a href="ch05-03-method-syntax.html"><strong aria-hidden="true">5.3.</strong> Method Syntax</a></li></ol></li><li class="chapter-item expanded "><a href="ch06-00-enums.html"><strong aria-hidden="true">6.</strong> Enums and Pattern Matching</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch06-01-defining-an-enum.html"><strong aria-hidden="true">6.1.</strong> Defining an Enum</a></li><li class="chapter-item expanded "><a href="ch06-02-match.html"><strong aria-hidden="true">6.2.</strong> The match Control Flow Construct</a></li><li class="chapter-item expanded "><a href="ch06-03-if-let.html"><strong aria-hidden="true">6.3.</strong> Concise Control Flow with if let</a></li><li class="chapter-item expanded "><a href="ch06-04-inventory.html"><strong aria-hidden="true">6.4.</strong> Ownership Inventory #1</a></li></ol></li><li class="chapter-item expanded "><a href="ch07-00-managing-growing-projects-with-packages-crates-and-modules.html"><strong aria-hidden="true">7.</strong> Managing Growing Projects with Packages, Crates, and Modules</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch07-01-packages-and-crates.html"><strong aria-hidden="true">7.1.</strong> Packages and Crates</a></li><li class="chapter-item expanded "><a href="ch07-02-defining-modules-to-control-scope-and-privacy.html"><strong aria-hidden="true">7.2.</strong> Defining Modules to Control Scope and Privacy</a></li><li class="chapter-item expanded "><a href="ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html"><strong aria-hidden="true">7.3.</strong> Paths for Referring to an Item in the Module Tree</a></li><li class="chapter-item expanded "><a href="ch07-04-bringing-paths-into-scope-with-the-use-keyword.html"><strong aria-hidden="true">7.4.</strong> Bringing Paths Into Scope with the use Keyword</a></li><li class="chapter-item expanded "><a href="ch07-05-separating-modules-into-different-files.html"><strong aria-hidden="true">7.5.</strong> Separating Modules into Different Files</a></li></ol></li><li class="chapter-item expanded "><a href="ch08-00-common-collections.html"><strong aria-hidden="true">8.</strong> Common Collections</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch08-01-vectors.html"><strong aria-hidden="true">8.1.</strong> Storing Lists of Values with Vectors</a></li><li class="chapter-item expanded "><a href="ch08-02-strings.html"><strong aria-hidden="true">8.2.</strong> Storing UTF-8 Encoded Text with Strings</a></li><li class="chapter-item expanded "><a href="ch08-03-hash-maps.html"><strong aria-hidden="true">8.3.</strong> Storing Keys with Associated Values in Hash Maps</a></li><li class="chapter-item expanded "><a href="ch08-04-inventory.html"><strong aria-hidden="true">8.4.</strong> Ownership Inventory #2</a></li></ol></li><li class="chapter-item expanded "><a href="ch09-00-error-handling.html"><strong aria-hidden="true">9.</strong> Error Handling</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch09-01-unrecoverable-errors-with-panic.html"><strong aria-hidden="true">9.1.</strong> Unrecoverable Errors with panic!</a></li><li class="chapter-item expanded "><a href="ch09-02-recoverable-errors-with-result.html"><strong aria-hidden="true">9.2.</strong> Recoverable Errors with Result</a></li><li class="chapter-item expanded "><a href="ch09-03-to-panic-or-not-to-panic.html"><strong aria-hidden="true">9.3.</strong> To panic! or Not to panic!</a></li></ol></li><li class="chapter-item expanded "><a href="ch10-00-generics.html"><strong aria-hidden="true">10.</strong> Generic Types, Traits, and Lifetimes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch10-01-syntax.html"><strong aria-hidden="true">10.1.</strong> Generic Data Types</a></li><li class="chapter-item expanded "><a href="ch10-02-traits.html"><strong aria-hidden="true">10.2.</strong> Traits: Defining Shared Behavior</a></li><li class="chapter-item expanded "><a href="ch10-03-lifetime-syntax.html"><strong aria-hidden="true">10.3.</strong> Validating References with Lifetimes</a></li><li class="chapter-item expanded "><a href="ch10-04-inventory.html"><strong aria-hidden="true">10.4.</strong> Ownership Inventory #3</a></li></ol></li><li class="chapter-item expanded "><a href="ch11-00-testing.html"><strong aria-hidden="true">11.</strong> Writing Automated Tests</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch11-01-writing-tests.html"><strong aria-hidden="true">11.1.</strong> How to Write Tests</a></li><li class="chapter-item expanded "><a href="ch11-02-running-tests.html"><strong aria-hidden="true">11.2.</strong> Controlling How Tests Are Run</a></li><li class="chapter-item expanded "><a href="ch11-03-test-organization.html"><strong aria-hidden="true">11.3.</strong> Test Organization</a></li></ol></li><li class="chapter-item expanded "><a href="ch12-00-an-io-project.html"><strong aria-hidden="true">12.</strong> An I/O Project: Building a Command Line Program</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch12-01-accepting-command-line-arguments.html"><strong aria-hidden="true">12.1.</strong> Accepting Command Line Arguments</a></li><li class="chapter-item expanded "><a href="ch12-02-reading-a-file.html"><strong aria-hidden="true">12.2.</strong> Reading a File</a></li><li class="chapter-item expanded "><a href="ch12-03-improving-error-handling-and-modularity.html"><strong aria-hidden="true">12.3.</strong> Refactoring to Improve Modularity and Error Handling</a></li><li class="chapter-item expanded "><a href="ch12-04-testing-the-librarys-functionality.html"><strong aria-hidden="true">12.4.</strong> Developing the Library’s Functionality with Test Driven Development</a></li><li class="chapter-item expanded "><a href="ch12-05-working-with-environment-variables.html"><strong aria-hidden="true">12.5.</strong> Working with Environment Variables</a></li><li class="chapter-item expanded "><a href="ch12-06-writing-to-stderr-instead-of-stdout.html"><strong aria-hidden="true">12.6.</strong> Writing Error Messages to Standard Error Instead of Standard Output</a></li></ol></li><li class="chapter-item expanded "><a href="ch13-00-functional-features.html"><strong aria-hidden="true">13.</strong> Functional Language Features: Iterators and Closures</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch13-01-closures.html"><strong aria-hidden="true">13.1.</strong> Closures: Anonymous Functions that Capture Their Environment</a></li><li class="chapter-item expanded "><a href="ch13-02-iterators.html"><strong aria-hidden="true">13.2.</strong> Processing a Series of Items with Iterators</a></li><li class="chapter-item expanded "><a href="ch13-03-improving-our-io-project.html"><strong aria-hidden="true">13.3.</strong> Improving Our I/O Project</a></li><li class="chapter-item expanded "><a href="ch13-04-performance.html"><strong aria-hidden="true">13.4.</strong> Comparing Performance: Loops vs. Iterators</a></li></ol></li><li class="chapter-item expanded "><a href="ch14-00-more-about-cargo.html"><strong aria-hidden="true">14.</strong> More about Cargo and Crates.io</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch14-01-release-profiles.html"><strong aria-hidden="true">14.1.</strong> Customizing Builds with Release Profiles</a></li><li class="chapter-item expanded "><a href="ch14-02-publishing-to-crates-io.html"><strong aria-hidden="true">14.2.</strong> Publishing a Crate to Crates.io</a></li><li class="chapter-item expanded "><a href="ch14-03-cargo-workspaces.html"><strong aria-hidden="true">14.3.</strong> Cargo Workspaces</a></li><li class="chapter-item expanded "><a href="ch14-04-installing-binaries.html"><strong aria-hidden="true">14.4.</strong> Installing Binaries from Crates.io with cargo install</a></li><li class="chapter-item expanded "><a href="ch14-05-extending-cargo.html"><strong aria-hidden="true">14.5.</strong> Extending Cargo with Custom Commands</a></li></ol></li><li class="chapter-item expanded "><a href="ch15-00-smart-pointers.html"><strong aria-hidden="true">15.</strong> Smart Pointers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch15-01-box.html"><strong aria-hidden="true">15.1.</strong> Using Box&lt;T&gt; to Point to Data on the Heap</a></li><li class="chapter-item expanded "><a href="ch15-02-deref.html"><strong aria-hidden="true">15.2.</strong> Treating Smart Pointers Like Regular References with the Deref Trait</a></li><li class="chapter-item expanded "><a href="ch15-03-drop.html"><strong aria-hidden="true">15.3.</strong> Running Code on Cleanup with the Drop Trait</a></li><li class="chapter-item expanded "><a href="ch15-04-rc.html"><strong aria-hidden="true">15.4.</strong> Rc&lt;T&gt;, the Reference Counted Smart Pointer</a></li><li class="chapter-item expanded "><a href="ch15-05-interior-mutability.html"><strong aria-hidden="true">15.5.</strong> RefCell&lt;T&gt; and the Interior Mutability Pattern</a></li><li class="chapter-item expanded "><a href="ch15-06-reference-cycles.html"><strong aria-hidden="true">15.6.</strong> Reference Cycles Can Leak Memory</a></li></ol></li><li class="chapter-item expanded "><a href="ch16-00-concurrency.html"><strong aria-hidden="true">16.</strong> Fearless Concurrency</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch16-01-threads.html"><strong aria-hidden="true">16.1.</strong> Using Threads to Run Code Simultaneously</a></li><li class="chapter-item expanded "><a href="ch16-02-message-passing.html"><strong aria-hidden="true">16.2.</strong> Using Message Passing to Transfer Data Between Threads</a></li><li class="chapter-item expanded "><a href="ch16-03-shared-state.html"><strong aria-hidden="true">16.3.</strong> Shared-State Concurrency</a></li><li class="chapter-item expanded "><a href="ch16-04-extensible-concurrency-sync-and-send.html"><strong aria-hidden="true">16.4.</strong> Extensible Concurrency with the Sync and Send Traits</a></li></ol></li><li class="chapter-item expanded "><a href="ch17-00-oop.html"><strong aria-hidden="true">17.</strong> Object Oriented Programming Features of Rust</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch17-01-what-is-oo.html"><strong aria-hidden="true">17.1.</strong> Characteristics of Object-Oriented Languages</a></li><li class="chapter-item expanded "><a href="ch17-02-trait-objects.html"><strong aria-hidden="true">17.2.</strong> Using Trait Objects That Allow for Values of Different Types</a></li><li class="chapter-item expanded "><a href="ch17-03-oo-design-patterns.html"><strong aria-hidden="true">17.3.</strong> Implementing an Object-Oriented Design Pattern</a></li><li class="chapter-item expanded "><a href="ch17-04-inventory.html"><strong aria-hidden="true">17.4.</strong> Ownership Inventory #4</a></li></ol></li><li class="chapter-item expanded "><a href="ch18-00-patterns.html"><strong aria-hidden="true">18.</strong> Patterns and Matching</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch18-01-all-the-places-for-patterns.html"><strong aria-hidden="true">18.1.</strong> All the Places Patterns Can Be Used</a></li><li class="chapter-item expanded "><a href="ch18-02-refutability.html"><strong aria-hidden="true">18.2.</strong> Refutability: Whether a Pattern Might Fail to Match</a></li><li class="chapter-item expanded "><a href="ch18-03-pattern-syntax.html"><strong aria-hidden="true">18.3.</strong> Pattern Syntax</a></li></ol></li><li class="chapter-item expanded "><a href="ch19-00-advanced-features.html"><strong aria-hidden="true">19.</strong> Advanced Features</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch19-01-unsafe-rust.html"><strong aria-hidden="true">19.1.</strong> Unsafe Rust</a></li><li class="chapter-item expanded "><a href="ch19-03-advanced-traits.html"><strong aria-hidden="true">19.2.</strong> Advanced Traits</a></li><li class="chapter-item expanded "><a href="ch19-04-advanced-types.html"><strong aria-hidden="true">19.3.</strong> Advanced Types</a></li><li class="chapter-item expanded "><a href="ch19-05-advanced-functions-and-closures.html"><strong aria-hidden="true">19.4.</strong> Advanced Functions and Closures</a></li><li class="chapter-item expanded "><a href="ch19-06-macros.html"><strong aria-hidden="true">19.5.</strong> Macros</a></li></ol></li><li class="chapter-item expanded "><a href="ch20-00-final-project-a-web-server.html"><strong aria-hidden="true">20.</strong> Final Project: Building a Multithreaded Web Server</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="ch20-01-single-threaded.html"><strong aria-hidden="true">20.1.</strong> Building a Single-Threaded Web Server</a></li><li class="chapter-item expanded "><a href="ch20-02-multithreaded.html"><strong aria-hidden="true">20.2.</strong> Turning Our Single-Threaded Server into a Multithreaded Server</a></li><li class="chapter-item expanded "><a href="ch20-03-graceful-shutdown-and-cleanup.html"><strong aria-hidden="true">20.3.</strong> Graceful Shutdown and Cleanup</a></li></ol></li><li class="chapter-item expanded "><a href="end-of-experiment.html"><strong aria-hidden="true">21.</strong> End of Experiment</a></li><li class="chapter-item expanded "><a href="appendix-00.html"><strong aria-hidden="true">22.</strong> Appendix</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="appendix-01-keywords.html"><strong aria-hidden="true">22.1.</strong> A - Keywords</a></li><li class="chapter-item expanded "><a href="appendix-02-operators.html"><strong aria-hidden="true">22.2.</strong> B - Operators and Symbols</a></li><li class="chapter-item expanded "><a href="appendix-03-derivable-traits.html"><strong aria-hidden="true">22.3.</strong> C - Derivable Traits</a></li><li class="chapter-item expanded "><a href="appendix-04-useful-development-tools.html"><strong aria-hidden="true">22.4.</strong> D - Useful Development Tools</a></li><li class="chapter-item expanded "><a href="appendix-05-editions.html"><strong aria-hidden="true">22.5.</strong> E - Editions</a></li><li class="chapter-item expanded "><a href="appendix-06-translation.html"><strong aria-hidden="true">22.6.</strong> F - Translations of the Book</a></li><li class="chapter-item expanded "><a href="appendix-07-nightly-rust.html"><strong aria-hidden="true">22.7.</strong> G - How Rust is Made and “Nightly Rust”</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rust Programming Language</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/cognitive-engineering-lab/rust-book" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h2 id="ownership-recap"><a class="header" href="#ownership-recap">Ownership Recap</a></h2>
<p>This chapter introduced a lot of new concepts like ownership, borrowing, and slices.
If you aren't familiar with systems programming, this chapter <em>also</em> introduced new concepts like memory allocation, the stack vs. the heap, pointers, and undefined behavior. Before we move on to the rest of Rust, let's first stop and take a breath. Then we'll review and practice with the key concepts from this chapter.</p>
<h3 id="ownership-versus-garbage-collection"><a class="header" href="#ownership-versus-garbage-collection">Ownership versus Garbage Collection</a></h3>
<p>To put ownership into context, we should talk about <strong>garbage collection</strong>.
Most programming languages use a garbage collector to manage memory, such as in Python, Java, and Javascript. A garbage collector works at runtime adjacent to a running program. The collector scans through memory to find data that's no longer used — that is, the running program can no longer reach that data from a function-local variable. Then the collector deallocates the unused memory for later use.</p>
<p>The key benefit of a garbage collector is that it avoids undefined behavior (such as using freed memory), as can happen in C or C++. Garbage collection also avoids the need for a complex type system to check for undefined behavior, like in Rust. However, there are a few drawbacks to garbage collection. One obvious drawback is performance, as garbage collection incurs either frequent small overheads (for reference-counting, like in Python and Swift) or infrequent large overheads (for tracing, like in all other GC'd languages). </p>
<p>But another less obvious drawback is that <strong>garbage collection can be unpredictable</strong>. To illustrate the point, say we are implementing a <code>Document</code> type that represents a mutable list of words. We could implement <code>Document</code> in a garbage-collected language such as Python in this way:</p>
<pre><code class="language-python">class Document:     
    def __init__(self, words: List[str]):
        &quot;&quot;&quot;Create a new document&quot;&quot;&quot;
        self.words = words

    def add_word(self, word: str):
        &quot;&quot;&quot;Add a word to the document&quot;&quot;&quot;
        self.words.append(word)
        
    def get_words(self) -&gt; List[str]:  
        &quot;&quot;&quot;Get a list of all the words in the document&quot;&quot;&quot;
        return self.words
</code></pre>
<p>Here's one way we could use this <code>Document</code> class that creates a document <code>d</code>, copies it into a new document <code>d2</code>, and then mutates <code>d2</code>.</p>
<pre><code class="language-python">words = [&quot;hello&quot;]
d = Document(words)

d2 = Document(d.get_words())
d2.add_word(&quot;world&quot;)
</code></pre>
<p>Consider two key questions about this example:</p>
<ol>
<li>
<p><strong>When is the word array deallocated?</strong> This program has created three pointers to the same array. The variables <code>words</code>, <code>d</code>, and <code>d2</code> all contain a pointer to the word list allocated on the heap. Therefore the Python garbage collector will only deallocate the word array when all three variables are out of scope. More generally, it's often difficult to predict where data will be garbage-collected just looking at the source code.</p>
</li>
<li>
<p><strong>What are the contents of the document <code>d</code>?</strong> Because <code>d2</code> contains a pointer to the same words array as <code>d</code>, then <code>d2.add_word(&quot;world&quot;)</code> also mutates the document <code>d</code>. Therefore in this example, the words in <code>d</code> are <code>[&quot;hello&quot;, &quot;world&quot;]</code>. This happens because <code>d.get_words()</code> returns a mutable reference to the words array in <code>d</code>. Pervasive, implicit mutable references can easily lead to unpredictable bugs when data structures can leak their internals<sup class="footnote-reference"><a href="#ownership-originally">1</a></sup>. Here, it is probably not intended behavior that a change to <code>d2</code> can change <code>d</code>.</p>
</li>
</ol>
<p>This problem is not unique to Python — you can encounter similar behavior in C#, Java, Javascript, and so on. Most programming languages actually have a concept of pointers. It's just a question of how the language exposes pointers to the programmer. Garbage collection makes it difficult to see which variable points to which data. For example, it wasn't obvious that <code>d.getWords()</code> produced a pointer to data within <code>d</code>. </p>
<p>By contrast, Rust's ownership model puts pointers front-and-center. We can see that by translating the <code>Document</code> type into a Rust data structure. Normally we would use a <code>struct</code>, but we haven't covered those yet, so we'll just use a type alias:</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>type Document = Vec&lt;String&gt;;

fn new_document(words: Vec&lt;String&gt;) -&gt; Document {
    words
}

fn add_word(this: &amp;mut Document, word: String) {
    this.push(word);
}

fn get_words(this: &amp;Document) -&gt; &amp;[String] {
    this.as_slice()
}
<span class="boring">}</span></code></pre></pre>
<p>This Rust API differs from the Python API in a few key ways:</p>
<ul>
<li>
<p>The function <code>new_document</code> consumes ownership of the input vector <code>words</code>. That means the <code>Document</code> <em>owns</em> the word vector. The word vector will be predictably deallocated when its owning <code>Document</code> goes out of scope.</p>
</li>
<li>
<p>The function <code>add_word</code> requires a mutable reference <code>&amp;mut Document</code> to be able to mutate a document. It also consumes ownership of the input <code>word</code>, meaning no one else can mutate the individual words of the document.</p>
</li>
<li>
<p>The function <code>get_words</code> returns an explicit immutable reference to strings within the document. The only way to create a new document from this word vector is to deep-copy its contents, like this:</p>
</li>
</ul>
<pre><pre class="playground"><code class="language-rust">fn main() {
    let words = vec![&quot;hello&quot;.to_string()];
    let d = new_document(words);

    // .to_vec() converts &amp;[String] to Vec&lt;String&gt; by cloning each string
    let words_copy = get_words(&amp;d).to_vec();
    let mut d2 = make_document(words_copy);
    add_word(&amp;mut d2, &quot;world&quot;.to_string());

    // The modification to `d2` does not affect `d`
    assert!(!get_words(&amp;d).contains(&amp;&quot;world&quot;.into()));
}</code></pre></pre>
<p>The point of this example is to say: if Rust is not your first language, then you already have experience working with memory and pointers! Rust just makes those concepts explicit. This has the dual benefit of (1) improving runtime performance by avoiding garbage collection, and (2) improving predictability by preventing accidental &quot;leaks&quot; of data.</p>
<h3 id="the-concepts-of-ownership"><a class="header" href="#the-concepts-of-ownership">The Concepts of Ownership</a></h3>
<p>Next, let's review the concepts of ownership. This review will be quick — the goal is to remind you of the relevant concepts. If you realize you forgot or didn't understand an important concept, then we will link you to the relevant chapters which you can review.</p>
<h4 id="ownership-at-runtime"><a class="header" href="#ownership-at-runtime">Ownership at Runtime</a></h4>
<p>We'll start by reviewing how Rust uses memory at runtime: </p>
<ul>
<li>Rust allocates local variables in stack frames, which are deallocated when a function call ends. </li>
<li>Local variables can hold either data (like numbers, booleans, tuples, etc.) or pointers. </li>
<li>Pointers can be created either through boxes (pointers owning data on the heap) or references (non-owning pointers).</li>
</ul>
<p>This diagram illustrates how each component looks at runtime:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\n  let mut a_num = 0;\n  inner(&amp;mut a_num);\n}\n\nfn inner(x: &amp;mut i32) {\n  let another_num = 1;\n  let a_stack_ref = &amp;another_num;\n\n  let a_box = Box::new(2);  \n  let a_box_stack_ref = &amp;a_box;\n  let a_box_heap_ref = &amp;*a_box;\n\n  *x += 5;\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[],&quot;interp&quot;:{&quot;state_locations&quot;:[53,231]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Success&quot;},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;end&quot;:9,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}}],&quot;location&quot;:{&quot;end&quot;:32,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:14},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}}],&quot;location&quot;:{&quot;end&quot;:53,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}}],&quot;location&quot;:{&quot;end&quot;:53,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;end&quot;:245,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:57},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;x&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;a_num&quot;}}},&quot;range&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:78,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:57},&quot;name&quot;:&quot;inner&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}}],&quot;location&quot;:{&quot;end&quot;:53,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;end&quot;:245,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:57},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;x&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;a_num&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;another_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}}],&quot;location&quot;:{&quot;end&quot;:103,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:83},&quot;name&quot;:&quot;inner&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}}],&quot;location&quot;:{&quot;end&quot;:53,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;end&quot;:245,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:57},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;x&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;a_num&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;another_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_stack_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;another_num&quot;}}},&quot;range&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:137,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:106},&quot;name&quot;:&quot;inner&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}}],&quot;location&quot;:{&quot;end&quot;:53,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;end&quot;:245,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:57},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;x&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;a_num&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;another_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_stack_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;another_num&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_box&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:165,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:141},&quot;name&quot;:&quot;inner&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}}],&quot;location&quot;:{&quot;end&quot;:53,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;end&quot;:245,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:57},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;x&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;a_num&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;another_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_stack_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;another_num&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_box&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_box_stack_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;a_box&quot;}}},&quot;range&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:199,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:170},&quot;name&quot;:&quot;inner&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:0}}],&quot;location&quot;:{&quot;end&quot;:53,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;end&quot;:245,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:57},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;x&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;a_num&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;another_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_stack_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;another_num&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_box&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_box_stack_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;a_box&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_box_heap_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:231,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:202},&quot;name&quot;:&quot;inner&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:5}}],&quot;location&quot;:{&quot;end&quot;:53,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;end&quot;:245,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:57},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;x&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;a_num&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;another_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_stack_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;another_num&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_box&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Box&quot;},&quot;fields&quot;:[[&quot;0&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Box&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_box_stack_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:1,&quot;local&quot;:&quot;a_box&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_box_heap_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:243,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:235},&quot;name&quot;:&quot;inner&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:5}}],&quot;location&quot;:{&quot;end&quot;:53,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;},{&quot;body_span&quot;:{&quot;end&quot;:245,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:57},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;x&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;a_num&quot;}}},&quot;range&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:245,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:244},&quot;name&quot;:&quot;inner&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;a_num&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:5}}],&quot;location&quot;:{&quot;end&quot;:53,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;end&quot;:55,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:54},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;horizontal&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>Review this diagram and make sure you understand each part. For example, you should be able to answer:</p>
<ul>
<li>Why does <code>a_box_stack_ref</code> point to the stack, while <code>a_box_heap_ref</code> point to the heap? </li>
<li>Why is the value <code>2</code> no longer on the heap at L2? </li>
<li>Why does <code>a_num</code> have the value <code>5</code> at L2?</li>
</ul>
<p>If you want to review boxes, re-read <a href="ch04-01-what-is-ownership.html">Chapter 4.1</a>. If you want to review references, re-read <a href="ch04-02-references-and-borrowing.html">Chapter 4.2</a>. If you want to see case studies involving boxes and references, re-read <a href="ch04-03-fixing-ownership-errors.html">Chapter 4.3</a>.</p>
<p>Slices are a special kind of reference that refer to a contiguous sequence of data in memory. This diagram illustrates how a slice refers to a subsequence of characters in a string:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\n  let s = String::from(\&quot;abcdefg\&quot;);\n  let s_slice = &amp;s[2..5];\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[],&quot;interp&quot;:{&quot;state_locations&quot;:[72]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Success&quot;},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:74,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;end&quot;:9,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:97},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:98},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:99},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:102},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:103}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:74,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;s&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:7}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:7}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:7}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:46,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:14},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:97},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:98},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:99},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:100},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:101},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:102},{&quot;type&quot;:&quot;Char&quot;,&quot;value&quot;:103}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:74,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;s&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;String&quot;,&quot;value&quot;:{&quot;len&quot;:7}},&quot;fields&quot;:[[&quot;vec&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:7}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:7}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;String&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;s_slice&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Subslice&quot;,&quot;value&quot;:[2,4]}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:3}}}],&quot;location&quot;:{&quot;end&quot;:72,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:49},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:74,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;end&quot;:74,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:73},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{}"  data-no-interact="true" ></div>
<p>If you want to review slices, re-read <a href="ch04-04-slices.html">Chapter 4.4</a>.</p>
<h4 id="ownership-at-compile-time"><a class="header" href="#ownership-at-compile-time">Ownership at Compile-time</a></h4>
<p>Rust tracks <span class="perm read">R</span> (read), <span class="perm write">W</span> (write), and <span class="perm own">O</span> (own) permissions on each variable. Rust requires that a variable has appropriate permissions to perform a given operation. As a basic example, if a variable is not declared as <code>let mut</code>, then it is missing the <span class="perm write">W</span> permission and cannot be mutated:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\n  let n = 0;\n  n += 1;\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;body_range&quot;:{&quot;end&quot;:36,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:27}],&quot;loan_points&quot;:{},&quot;loan_regions&quot;:{},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;end&quot;:24,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:24},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:19,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:18},&quot;state&quot;:[[&quot;n&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;end&quot;:33,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:27}}]}]}}]}"  data-config="{&quot;stepper&quot;:&quot;true&quot;,&quot;boundaries&quot;:&quot;true&quot;,&quot;shouldFail&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>A variabler's permissions can be changed if it is <strong>moved</strong> or <strong>borrowed</strong>. A move of a variable with a non-copyable type (like <code>Box&lt;T&gt;</code> or <code>String</code>) requires the <span class="perm read">R</span><span class="perm own">O</span> permissions, and the move eliminates all permissions on the variable. That rule prevents the use of moved variables:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\n  let s = String::from(\&quot;Hello world\&quot;);\n  consume_a_string(s);\n  println!(\&quot;{s}\&quot;); // can't read `s` after moving it\n}\n\nfn consume_a_string(_s: String) {\n  // om nom nom\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;body_range&quot;:{&quot;end&quot;:128,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:70},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_moved&quot;:0,&quot;path_uninitialized&quot;:true,&quot;permissions&quot;:{&quot;drop&quot;:false,&quot;read&quot;:false,&quot;write&quot;:false},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:87}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;end&quot;:89,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:86},&quot;1&quot;:{&quot;end&quot;:91,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:76}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:89,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:86}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:91,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:76}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;end&quot;:50,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:50},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:19,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:18},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;end&quot;:72,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:53}}]},{&quot;location&quot;:{&quot;end&quot;:73,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:73},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:72,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:53},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;end&quot;:73,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:72}}]}]}},{&quot;Ok&quot;:{&quot;body_range&quot;:{&quot;end&quot;:181,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:130},&quot;boundaries&quot;:[],&quot;loan_points&quot;:{},&quot;loan_regions&quot;:{},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[]}}]}"  data-config="{&quot;boundaries&quot;:&quot;true&quot;,&quot;shouldFail&quot;:&quot;true&quot;,&quot;stepper&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>If you want to review how moves work, re-read <a href="ch04-01-what-is-ownership.html">Chapter 4.1</a>.</p>
<p>Borrowing a variable (creating a reference to it) temporarily removes some of the variable's permissions. An immutable borrow creates an immutable reference, and also disables the borrowed data from being mutated. For example, printing an immutable reference is ok:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut s = String::from(\&quot;Hello\&quot;);\nlet s_ref = &amp;s;\nprintln!(\&quot;{s_ref}\&quot;);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,5],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;body_range&quot;:{&quot;end&quot;:85,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:60},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:true,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:74}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;end&quot;:61,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59},&quot;1&quot;:{&quot;end&quot;:80,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:73},&quot;2&quot;:{&quot;end&quot;:82,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:61,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59},{&quot;end&quot;:80,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:73}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:80,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:73}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:82,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;end&quot;:46,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:46},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:21,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:16},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51}}]},{&quot;location&quot;:{&quot;end&quot;:62,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:62},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;end&quot;:82,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63}}]},{&quot;location&quot;:{&quot;end&quot;:83,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:83},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:82,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63},&quot;state&quot;:[[&quot;s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;end&quot;:82,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63}}]}]}}]}"  data-config="{&quot;stepper&quot;:&quot;true&quot;,&quot;boundaries&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>But mutating an immutable reference is not ok:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut s = String::from(\&quot;Hello\&quot;);\nlet s_ref = &amp;s;\ns_ref.push_str(\&quot; world\&quot;);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,5],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[3],&quot;focused_paths&quot;:{&quot;3&quot;:[{&quot;type&quot;:&quot;Literal&quot;,&quot;value&quot;:&quot;*s_ref&quot;}]}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;body_range&quot;:{&quot;end&quot;:90,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:60},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:68}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;end&quot;:61,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:61,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59},{&quot;end&quot;:87,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;end&quot;:46,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:46},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:21,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:16},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51}}]},{&quot;location&quot;:{&quot;end&quot;:62,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:62},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;end&quot;:87,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63}}]}]}}]}"  data-config="{&quot;stepper&quot;:&quot;true&quot;,&quot;shouldFail&quot;:&quot;true&quot;,&quot;boundaries&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>And mutating the immutably borrowed data is not ok:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut s = String::from(\&quot;Hello\&quot;);\nlet s_ref = &amp;s;\ns.push_str(\&quot; world\&quot;);\nprintln!(\&quot;{s_ref}\&quot;);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,6],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[2,3],&quot;focused_paths&quot;:{&quot;3&quot;:[{&quot;type&quot;:&quot;Regex&quot;,&quot;value&quot;:&quot;s$&quot;}]}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;body_range&quot;:{&quot;end&quot;:107,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:60},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;loan_drop_refined&quot;:0,&quot;loan_write_refined&quot;:0,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:64}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;end&quot;:61,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59},&quot;1&quot;:{&quot;end&quot;:83,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63},&quot;2&quot;:{&quot;end&quot;:102,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:95},&quot;3&quot;:{&quot;end&quot;:104,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:85}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:61,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59},{&quot;end&quot;:83,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63},{&quot;end&quot;:102,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:95}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:83,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:102,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:95}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}},&quot;3&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:104,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:85}],&quot;refiner_point&quot;:{&quot;Loan&quot;:3}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;end&quot;:46,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:46},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:21,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:16},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51}}]},{&quot;location&quot;:{&quot;end&quot;:62,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:62},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;end&quot;:83,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:63}}]}]}}]}"  data-config="{&quot;boundaries&quot;:&quot;true&quot;,&quot;shouldFail&quot;:&quot;true&quot;,&quot;stepper&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>And moving data out of the reference is not ok:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut s = String::from(\&quot;Hello\&quot;);\nlet s_ref = &amp;s;\nlet s2 = *s_ref;\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,5],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[3],&quot;focused_paths&quot;:{&quot;3&quot;:[{&quot;type&quot;:&quot;Literal&quot;,&quot;value&quot;:&quot;*s_ref&quot;}]}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;body_range&quot;:{&quot;end&quot;:81,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:60},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:false},&quot;expected&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:72}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;end&quot;:61,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:61,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59},{&quot;end&quot;:78,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:72}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;end&quot;:46,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:46},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:21,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:16},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51}}]},{&quot;location&quot;:{&quot;end&quot;:62,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:62},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}]],&quot;to&quot;:{&quot;end&quot;:69,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:67}}]}]}}]}"  data-config="{&quot;stepper&quot;:&quot;true&quot;,&quot;shouldFail&quot;:&quot;true&quot;,&quot;boundaries&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>A mutable borrow creates an immutable reference, which disables the borrowed data from being read or written. For example, mutating a mutable reference is ok:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut s = String::from(\&quot;Hello\&quot;);\nlet s_ref = &amp;mut s;\ns_ref.push_str(\&quot; world\&quot;);\nprintln!(\&quot;{s}\&quot;);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,6],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;body_range&quot;:{&quot;end&quot;:111,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:64},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:false,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:72},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:104}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;end&quot;:65,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59},&quot;1&quot;:{&quot;end&quot;:91,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:67},&quot;2&quot;:{&quot;end&quot;:106,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:103},&quot;3&quot;:{&quot;end&quot;:108,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:93}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:65,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59},{&quot;end&quot;:91,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:67}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:91,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:67}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:106,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:103}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}},&quot;3&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:108,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:93}],&quot;refiner_point&quot;:{&quot;Loan&quot;:3}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;end&quot;:46,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:46},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:21,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:16},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51}}]},{&quot;location&quot;:{&quot;end&quot;:92,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:92},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:91,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:67},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;end&quot;:92,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:91}}]},{&quot;location&quot;:{&quot;end&quot;:109,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:109},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:92,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:91},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;end&quot;:108,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:93}}]},{&quot;location&quot;:{&quot;end&quot;:66,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:66},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;end&quot;:91,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:67}}]}]}}]}"  data-config="{&quot;boundaries&quot;:&quot;true&quot;,&quot;stepper&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>But accessing the mutably borrowed data is not ok:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet mut s = String::from(\&quot;Hello\&quot;);\nlet s_ref = &amp;mut s;\nprintln!(\&quot;{s}\&quot;);\ns_ref.push_str(\&quot; world\&quot;);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,6],&quot;interp&quot;:{&quot;state_locations&quot;:[]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[3],&quot;focused_paths&quot;:{&quot;3&quot;:[{&quot;type&quot;:&quot;Regex&quot;,&quot;value&quot;:&quot;s$&quot;}]}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;permissions&quot;]"  data-responses="{&quot;permissions&quot;:[{&quot;Ok&quot;:{&quot;body_range&quot;:{&quot;end&quot;:111,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;boundaries&quot;:[{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:true,&quot;read&quot;:true,&quot;write&quot;:true},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:true},&quot;location&quot;:64},{&quot;actual&quot;:{&quot;is_live&quot;:true,&quot;loan_drop_refined&quot;:0,&quot;loan_read_refined&quot;:0,&quot;loan_write_refined&quot;:0,&quot;path_uninitialized&quot;:false,&quot;permissions&quot;:{&quot;drop&quot;:false,&quot;read&quot;:false,&quot;write&quot;:false},&quot;type_copyable&quot;:false,&quot;type_droppable&quot;:true,&quot;type_writeable&quot;:true},&quot;expected&quot;:{&quot;drop&quot;:false,&quot;read&quot;:true,&quot;write&quot;:false},&quot;location&quot;:78}],&quot;loan_points&quot;:{&quot;0&quot;:{&quot;end&quot;:65,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59},&quot;1&quot;:{&quot;end&quot;:80,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:77},&quot;2&quot;:{&quot;end&quot;:82,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:67},&quot;3&quot;:{&quot;end&quot;:108,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:84}},&quot;loan_regions&quot;:{&quot;0&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:65,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:59},{&quot;end&quot;:80,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:77},{&quot;end&quot;:108,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:84}],&quot;refiner_point&quot;:{&quot;Loan&quot;:0}},&quot;1&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:80,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:77}],&quot;refiner_point&quot;:{&quot;Loan&quot;:1}},&quot;2&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:82,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:67}],&quot;refiner_point&quot;:{&quot;Loan&quot;:2}},&quot;3&quot;:{&quot;refined_ranges&quot;:[{&quot;end&quot;:108,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:84}],&quot;refiner_point&quot;:{&quot;Loan&quot;:3}}},&quot;move_points&quot;:{},&quot;move_regions&quot;:{},&quot;steps&quot;:[{&quot;location&quot;:{&quot;end&quot;:46,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:46},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:21,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:16},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51}}]},{&quot;location&quot;:{&quot;end&quot;:66,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:66},&quot;state&quot;:[{&quot;from&quot;:{&quot;end&quot;:56,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:51},&quot;state&quot;:[[&quot;s&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:0},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;read&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;write&quot;:{&quot;type&quot;:&quot;Low&quot;}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}],[&quot;s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;Low&quot;},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false}}],[&quot;*s_ref&quot;,{&quot;is_live&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;loan_drop_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_read_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;loan_write_refined&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_moved&quot;:{&quot;type&quot;:&quot;None&quot;},&quot;path_uninitialized&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;permissions&quot;:{&quot;drop&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;read&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true},&quot;write&quot;:{&quot;type&quot;:&quot;High&quot;,&quot;value&quot;:true}},&quot;type_droppable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:false},&quot;type_writeable&quot;:{&quot;type&quot;:&quot;None&quot;,&quot;value&quot;:true}}]],&quot;to&quot;:{&quot;end&quot;:82,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:67}}]}]}}]}"  data-config="{&quot;shouldFail&quot;:&quot;true&quot;,&quot;stepper&quot;:&quot;true&quot;,&quot;boundaries&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>If you want to review permissions and references, re-read <a href="ch04-01-what-is-ownership.html">Chapter 4.1</a>.</p>
<h4 id="connecting-ownership-between-compile-time-and-runtime"><a class="header" href="#connecting-ownership-between-compile-time-and-runtime">Connecting Ownership between Compile-time and Runtime</a></h4>
<p>Rust's permissions are designed to prevent undefined behavior. For example, one kind of undefined behavior is a <strong>use-after-free</strong> where freed memory is read or written. Immutable borrows remove the write permission to avoid use-after-free, like in this case:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet v = vec![1, 2, 3];\nlet n = &amp;v[0];\nv.push(4);\nprintln!(\&quot;{n}\&quot;);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,6],&quot;interp&quot;:{&quot;state_locations&quot;:[49,60,77]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Error&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;PointerUseAfterFree&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:79,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;end&quot;:9,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:79,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:34,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:12},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:79,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;n&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:49,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:4}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:79,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:4}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:6}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:4}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;n&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}}],&quot;location&quot;:{&quot;end&quot;:60,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:50},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:4}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:79,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:4}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:6}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:4}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;n&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}}],&quot;location&quot;:{&quot;end&quot;:76,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:61},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;shouldFail&quot;:&quot;true&quot;,&quot;horizontal&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>Another kind of undefined behavior is a <strong>double-free</strong> where memory is freed twice. Non-copyable data cannot be moved out of a reference to avoid double-frees, like in this case:</p>
<div class="aquascope-embed" data-code="&quot;fn main() {\nlet v = vec![1, 2, 3];\nlet v_ref: &amp;Vec&lt;i32&gt; = &amp;v;\nlet v2 = *v_ref;\ndrop(v2);\ndrop(v);\n}&quot;"  data-annotations="{&quot;hidden_lines&quot;:[1,7],&quot;interp&quot;:{&quot;state_locations&quot;:[78,88,97]},&quot;stepper&quot;:{&quot;focused_lines&quot;:[],&quot;focused_paths&quot;:{}},&quot;boundaries&quot;:{&quot;focused_lines&quot;:[]}}"  data-operations="[&quot;interpreter&quot;]"  data-responses="{&quot;interpreter&quot;:{&quot;Ok&quot;:{&quot;result&quot;:{&quot;type&quot;:&quot;Error&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;PointerUseAfterFree&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}},&quot;steps&quot;:[{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:99,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[],&quot;location&quot;:{&quot;end&quot;:9,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:99,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:34,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:12},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:99,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;v&quot;}}},&quot;range&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:61,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:35},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[{&quot;type&quot;:&quot;Array&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;All&quot;,&quot;value&quot;:[{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:1},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:2},{&quot;type&quot;:&quot;Int&quot;,&quot;value&quot;:3}]}}]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:99,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;v&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v2&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[{&quot;type&quot;:&quot;Index&quot;,&quot;value&quot;:0}],&quot;segment&quot;:{&quot;type&quot;:&quot;Heap&quot;,&quot;value&quot;:{&quot;index&quot;:0}}},&quot;range&quot;:null}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:78,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:62},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:99,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;v&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[[]],&quot;name&quot;:&quot;v2&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:88,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:79},&quot;name&quot;:&quot;main&quot;}]}},{&quot;heap&quot;:{&quot;locations&quot;:[]},&quot;stack&quot;:{&quot;frames&quot;:[{&quot;body_span&quot;:{&quot;end&quot;:99,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:0},&quot;locals&quot;:[{&quot;moved_paths&quot;:[[]],&quot;name&quot;:&quot;v&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}},{&quot;moved_paths&quot;:[],&quot;name&quot;:&quot;v_ref&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Pointer&quot;,&quot;value&quot;:{&quot;path&quot;:{&quot;parts&quot;:[],&quot;segment&quot;:{&quot;type&quot;:&quot;Stack&quot;,&quot;value&quot;:{&quot;frame&quot;:0,&quot;local&quot;:&quot;v&quot;}}},&quot;range&quot;:null}}},{&quot;moved_paths&quot;:[[]],&quot;name&quot;:&quot;v2&quot;,&quot;value&quot;:{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:{&quot;type&quot;:&quot;Vec&quot;,&quot;value&quot;:{&quot;len&quot;:3}},&quot;fields&quot;:[[&quot;buf&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;ptr&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Adt&quot;,&quot;value&quot;:{&quot;alloc_kind&quot;:null,&quot;fields&quot;:[[&quot;pointer&quot;,{&quot;type&quot;:&quot;Unallocated&quot;,&quot;value&quot;:{&quot;alloc_id&quot;:0}}]],&quot;name&quot;:&quot;NonNull&quot;,&quot;variant&quot;:null}}]],&quot;name&quot;:&quot;Unique&quot;,&quot;variant&quot;:null}}],[&quot;cap&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;RawVec&quot;,&quot;variant&quot;:null}}],[&quot;len&quot;,{&quot;type&quot;:&quot;Uint&quot;,&quot;value&quot;:3}]],&quot;name&quot;:&quot;Vec&quot;,&quot;variant&quot;:null}}}],&quot;location&quot;:{&quot;end&quot;:97,&quot;filename&quot;:{&quot;private&quot;:0},&quot;start&quot;:89},&quot;name&quot;:&quot;main&quot;}]}}]}}}"  data-config="{&quot;shouldFail&quot;:&quot;true&quot;,&quot;horizontal&quot;:&quot;true&quot;}"  data-no-interact="true" ></div>
<p>If you want to review undefined behavior, re-read <a href="ch04-01-what-is-ownership.html">Chapter 4.1</a> and <a href="ch04-03-fixing-ownership-errors.html">Chapter 4.3</a>.</p>
<h3 id="the-rest-of-ownership"><a class="header" href="#the-rest-of-ownership">The Rest of Ownership</a></h3>
<p>As we introduce additional features (like structs, enums, and traits), those features will have specific interactions with ownership. But this chapter provides the essential foundations — the concepts of memory, pointers, undefined behavior, and permissions will help us talk about the more advanced parts of Rust in future chapters.</p>
<p>And don't forget to take the quizzes if you want to interactively check your understanding!</p>
<div class="quiz-placeholder" data-quiz-name="ch04-05-ownership-recap"  data-quiz-questions="{&quot;questions&quot;:[{&quot;context&quot;:&quot;The spec calls for the input to be mutated in-place, therefore the most appropriate type signature accepts a mutable reference to the input.\nAn immutable reference or an owned vector are both inappropriate for this spec.\n&quot;,&quot;id&quot;:&quot;1ec0098c-c5dc-46de-a889-b6659c0af757&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;```\nfn round_all(v: &amp;mut Vec&lt;f32&gt;);\n```\n&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;```\nfn round_all(v: &amp;Vec&lt;f32&gt;) -&gt; Vec&lt;f32&gt;;\n```\n&quot;,&quot;```\nfn round_all(v: Vec&lt;f32&gt;);\n```\n&quot;,&quot;```\nfn round_all(v: &amp;Vec&lt;f32&gt;);\n```\n&quot;],&quot;prompt&quot;:&quot;Say you are writing a function with the following spec:\n\n&gt; `round_all` takes as input a list of floating point numbers, and it rounds each number in-place to the nearest integer.\n\nWhich of the following is the most appropriate type signature for a function implementing this spec?\n&quot;}},{&quot;context&quot;:&quot;For `haystack`, the slice type `&amp;[String]` can accept more inputs than `&amp;Vec&lt;String&gt;`, so it is preferred.\nFor `needle`, the target substring does not need to be heap-allocated, so `&amp;str` is preferred to `String`.\nFor the return type, `Vec&lt;String&gt;` is not desirable because it would require cloning the input strings.\n`&amp;[String]` is not desirable because it can only return a contiguous subsequence of the input.\n`Vec&lt;&amp;String&gt;` is the most preferable because it only incurs the cost of allocating the vector, not the strings themselves.\n&quot;,&quot;id&quot;:&quot;f8ca5ab2-0e5d-4c0d-bca2-99e6763ba9c5&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;```\nfn find_contains(haystack: &amp;[String], needle: &amp;str) -&gt; Vec&lt;&amp;String&gt;;\n```\n&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;```\nfn find_contains(haystack: &amp;Vec&lt;String&gt;, needle: String) -&gt; Vec&lt;String&gt;;\n```\n&quot;,&quot;```\nfn find_contains(haystack: &amp;[String], needle: &amp;str) -&gt; Vec&lt;String&gt;;\n```\n&quot;,&quot;```\nfn find_contains(haystack: &amp;Vec&lt;String&gt;, needle: &amp;str) -&gt; &amp;[String];\n```\n&quot;],&quot;prompt&quot;:&quot;Say you are writing a function with the following spec:\n\n&gt; `find_contains` takes as input a collection of strings and a target substring. \n&gt; It returns a list of all the strings in the collection that contain the target substring.\n\nWhich of the following is the most appropriate type signature for a function implementing this spec?\n&quot;}},{&quot;context&quot;:&quot;As discussed in [Chapter 4.3 \&quot;Fixing a Safe Program: Mutating Different Array Elements\&quot;](ch04-03-fixing-ownership-errors.html#fixing-a-safe-program-mutating-different-array-elements), functions like `split_at_mut` are implemented with the `unsafe` feature.\nThis feature doesn't completely disable the borrow checker, but rather enables the use of specific unsafe features like raw pointers.\n&quot;,&quot;id&quot;:&quot;868a4edf-16f0-4191-8aed-835c812b8b25&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;`split_at_mut` uses unsafe code to circumvent the borrow checker with raw pointers&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;`split_at_mut` is a special compiler primitive that cannot be implemented within the language&quot;,&quot;`split_at_mut` uses unsafe code to disable the borrow checker from checking the safety of mutable references&quot;,&quot;`split_at_mut` calls into a C library that can't be analyzed by Rust&quot;],&quot;prompt&quot;:&quot;Rust normally disallows multiple mutable accesses to the same array, even when those accesses are disjoint. \nFor example, this function does not compile:\n\n```\nfn main() {\n  let mut v = vec![0, 1, 2, 3];\n  let (r0, r1) = (&amp;mut v[0..2], &amp;mut v[2..4]);\n  r0[0] += 1;\n  r1[0] += 1;  \n}\n```\n\nHowever, the Rust standard library has a function `slice::split_at_mut` that does permit this functionality:\n\n```\nfn main() {\n  let mut v = vec![0, 1, 2, 3];\n  let (r0, r1) = v.split_at_mut(2);\n  r0[0] += 1;\n  r1[0] += 1;  \n}\n```\n\nWhich of the following best describes how it's possible to implement `split_at_mut`?\n&quot;}},{&quot;context&quot;:&quot;The @Perm{own} permission represents ownership of an object. There can only exist one owner of an object, so it is important\nthat references cannot transfer ownership.\n&quot;,&quot;id&quot;:&quot;ba32e57a-e5f2-42e4-8cfd-eb265990c690&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;Ownership permits moving, and moving out of a reference can cause a double-free&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;Ownership permits borrowing, and reborrowing `*s_ref` can cause a double-free&quot;,&quot;Ownership permits mutation, and mutating `*s_ref` can cause a use-after-free&quot;,&quot;Ownership permits reading, and reading `*s_ref` can cause a use-after-free&quot;],&quot;prompt&quot;:&quot;Consider the permissions in the following program:\n\n&lt;div class=\&quot;aquascope-embed\&quot; data-code=\&quot;&amp;quot;fn main() {\\nlet s = String::new();\\nlet s_ref = &amp;amp;s;\\nprintln!(\\&amp;quot;{s_ref}\\&amp;quot;);\\n}&amp;quot;\&quot;  data-annotations=\&quot;{&amp;quot;hidden_lines&amp;quot;:[1,4,5],&amp;quot;interp&amp;quot;:{&amp;quot;state_locations&amp;quot;:[]},&amp;quot;stepper&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[3],&amp;quot;focused_paths&amp;quot;:{&amp;quot;3&amp;quot;:[{&amp;quot;type&amp;quot;:&amp;quot;Literal&amp;quot;,&amp;quot;value&amp;quot;:&amp;quot;*s_ref&amp;quot;}]}},&amp;quot;boundaries&amp;quot;:{&amp;quot;focused_lines&amp;quot;:[]}}\&quot;  data-operations=\&quot;[&amp;quot;permissions&amp;quot;]\&quot;  data-responses=\&quot;{&amp;quot;permissions&amp;quot;:[{&amp;quot;Ok&amp;quot;:{&amp;quot;body_range&amp;quot;:{&amp;quot;end&amp;quot;:73,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:0},&amp;quot;boundaries&amp;quot;:[{&amp;quot;actual&amp;quot;:{&amp;quot;is_live&amp;quot;:true,&amp;quot;path_uninitialized&amp;quot;:false,&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:true,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:false},&amp;quot;type_copyable&amp;quot;:false,&amp;quot;type_droppable&amp;quot;:true,&amp;quot;type_writeable&amp;quot;:false},&amp;quot;expected&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:false},&amp;quot;location&amp;quot;:48},{&amp;quot;actual&amp;quot;:{&amp;quot;is_live&amp;quot;:true,&amp;quot;path_uninitialized&amp;quot;:false,&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:true,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:false},&amp;quot;type_copyable&amp;quot;:true,&amp;quot;type_droppable&amp;quot;:true,&amp;quot;type_writeable&amp;quot;:false},&amp;quot;expected&amp;quot;:{&amp;quot;drop&amp;quot;:false,&amp;quot;read&amp;quot;:true,&amp;quot;write&amp;quot;:false},&amp;quot;location&amp;quot;:62}],&amp;quot;loan_points&amp;quot;:{&amp;quot;0&amp;quot;:{&amp;quot;end&amp;quot;:49,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:47},&amp;quot;1&amp;quot;:{&amp;quot;end&amp;quot;:68,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:61},&amp;quot;2&amp;quot;:{&amp;quot;end&amp;quot;:70,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:51}},&amp;quot;loan_regions&amp;quot;:{&amp;quot;0&amp;quot;:{&amp;quot;refined_ranges&amp;quot;:[{&amp;quot;end&amp;quot;:49,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:47},{&amp;quot;end&amp;quot;:68,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:61}],&amp;quot;refiner_point&amp;quot;:{&amp;quot;Loan&amp;quot;:0}},&amp;quot;1&amp;quot;:{&amp;quot;refined_ranges&amp;quot;:[{&amp;quot;end&amp;quot;:68,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:61}],&amp;quot;refiner_point&amp;quot;:{&amp;quot;Loan&amp;quot;:1}},&amp;quot;2&amp;quot;:{&amp;quot;refined_ranges&amp;quot;:[{&amp;quot;end&amp;quot;:70,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:51}],&amp;quot;refiner_point&amp;quot;:{&amp;quot;Loan&amp;quot;:2}}},&amp;quot;move_points&amp;quot;:{},&amp;quot;move_regions&amp;quot;:{},&amp;quot;steps&amp;quot;:[{&amp;quot;location&amp;quot;:{&amp;quot;end&amp;quot;:50,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:50},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;end&amp;quot;:44,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:39},&amp;quot;state&amp;quot;:[[&amp;quot;s&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:0},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:0},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}],[&amp;quot;s_ref&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}],[&amp;quot;*s_ref&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}]],&amp;quot;to&amp;quot;:{&amp;quot;end&amp;quot;:70,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:51}}]},{&amp;quot;location&amp;quot;:{&amp;quot;end&amp;quot;:71,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:71},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;end&amp;quot;:70,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:51},&amp;quot;state&amp;quot;:[[&amp;quot;s_ref&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}],[&amp;quot;*s_ref&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;Low&amp;quot;},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}]],&amp;quot;to&amp;quot;:{&amp;quot;end&amp;quot;:70,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:51}}]},{&amp;quot;location&amp;quot;:{&amp;quot;end&amp;quot;:34,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:34},&amp;quot;state&amp;quot;:[{&amp;quot;from&amp;quot;:{&amp;quot;end&amp;quot;:17,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:16},&amp;quot;state&amp;quot;:[[&amp;quot;s&amp;quot;,{&amp;quot;is_live&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;loan_drop_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_read_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;loan_write_refined&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_moved&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;},&amp;quot;path_uninitialized&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false},&amp;quot;permissions&amp;quot;:{&amp;quot;drop&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;read&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;High&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;write&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}},&amp;quot;type_droppable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:true},&amp;quot;type_writeable&amp;quot;:{&amp;quot;type&amp;quot;:&amp;quot;None&amp;quot;,&amp;quot;value&amp;quot;:false}}]],&amp;quot;to&amp;quot;:{&amp;quot;end&amp;quot;:44,&amp;quot;filename&amp;quot;:{&amp;quot;private&amp;quot;:0},&amp;quot;start&amp;quot;:39}}]}]}}]}\&quot;  data-config=\&quot;{&amp;quot;stepper&amp;quot;:&amp;quot;true&amp;quot;,&amp;quot;boundaries&amp;quot;:&amp;quot;true&amp;quot;}\&quot;  data-no-interact=\&quot;true\&quot; &gt;&lt;/div&gt;\n\nWhich of the following best explains why `*s_ref` does not have the &lt;span class=\&quot;perm own\&quot;&gt;O&lt;/span&gt; (own) permission?\n&quot;}},{&quot;context&quot;:&quot;The borrow checker always rejects programs with undefined behavior, but may sometimes reject programs without undefined behavior (i.e., are perfectly safe).\nIn technical terms, the borrow checker is a sound and incomplete analysis.\n&quot;,&quot;id&quot;:&quot;3a5f5de5-23a9-49fb-bdb4-acc9c3fbb4a6&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:[&quot;The borrow checker always rejects programs with undefined behavior&quot;,&quot;The borrow checker sometimes rejects programs without undefined behavior&quot;]},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;The borrow checker always accepts programs without undefined behavior&quot;,&quot;The borrow checker sometimes accepts programs with undefined behavior&quot;],&quot;prompt&quot;:&quot;Consider the set of Rust programs that contain no `unsafe` code. \nSelect each of the following statements that is true about the kinds of programs accepted and rejected by the borrow checker:\n&quot;}},{&quot;context&quot;:&quot;This function would cause a double-free on any input.\n&quot;,&quot;id&quot;:&quot;208e0e38-a706-4d96-9809-f0e12f574136&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;This function COULD cause undefined behavior&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;This function could NOT cause undefined behavior&quot;],&quot;prompt&quot;:&quot;The function `extract` is rejected by the borrow checker:\n\n```rust\nfn extract(b: &amp;Box&lt;i32&gt;) -&gt; i32 {\n    let b2: Box&lt;i32&gt; = *b;\n    *b2\n}\n```\n\nImagine that the borrow checker did not reject this function. \nDetermine whether there exists an input such that the function would cause undefined behavior if executed on that input.\n&quot;}},{&quot;context&quot;:&quot;The borrow checker rejects this function because it assumes that `get_first` and `get_second` could return a mutable\nreference to either component of the tuple, and so `fst` and `snd` could possibly point to the same value. But they are\nalways distinct in this program, so this function is actually safe.\n&quot;,&quot;id&quot;:&quot;dcfd54f8-7fe6-4483-aefd-ea95ba5b5eb0&quot;,&quot;type&quot;:&quot;MultipleChoice&quot;,&quot;answer&quot;:{&quot;answer&quot;:&quot;This function could NOT cause undefined behavior&quot;},&quot;prompt&quot;:{&quot;distractors&quot;:[&quot;This function COULD cause undefined behavior&quot;],&quot;prompt&quot;:&quot;The function `transfer_string` is rejected by the borrow checker:\n\n```rust\nfn get_first(strs: &amp;mut (String, String)) -&gt; &amp;mut String {\n    &amp;mut strs.0\n}\n\nfn get_second(strs: &amp;mut (String, String)) -&gt; &amp;mut String {\n    &amp;mut strs.1\n}\n\nfn transfer_string(strs: &amp;mut (String, String)) {\n    let fst = get_first(strs);\n    let snd = get_second(strs);\n    fst.push_str(snd);\n    snd.clear();\n}\n```\n\nImagine that the borrow checker did not reject this function. \nDetermine whether there exists an input such that the function would cause undefined behavior if executed on that input.\n&quot;}}]}"  data-quiz-fullscreen=""  data-quiz-cache-answers="" ></div>
<div class="footnote-definition" id="ownership-originally"><sup class="footnote-definition-label">1</sup>
<p>In fact, the original invention of ownership types wasn't about memory safety at all. It was about preventing leaks of mutable references to data structure internals in Java-like languages. If you're curious to learn more about the history of ownership types, check out the paper <a href="https://dl.acm.org/doi/abs/10.1145/286936.286947">&quot;Ownership Types for Flexible Alias Protection&quot;</a> (Clarke et al. 1998).</p>
</div>
<script type="text/javascript" src="aquascope/lib.js"></script><link rel="stylesheet" type="text/css" href="aquascope/lib.css">
<script type="text/javascript" src="quiz/lib.js"></script><link rel="stylesheet" type="text/css" href="quiz/lib.css">
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch04-04-slices.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="ch05-00-structs.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch04-04-slices.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="ch05-00-structs.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="ferris.js"></script>
        <script src="js-extensions/packages/telemetry/dist/index.js"></script>
        <script src="js-extensions/packages/consent-form/dist/index.js"></script>
        <script src="js-extensions/packages/feedback/dist/index.js"></script>


    </body>
</html>
